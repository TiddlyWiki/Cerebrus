name: Validate PR Action

description: |
  A custom action to validate PR paths for master and tiddlywiki-com branches.

inputs:
  repo:
    description: 'The repository name in the format "owner/repo".'
    required: true
  pr_number:
    description: 'The pull request number.'
    required: true
  base_ref:
    description: 'The base branch of the pull request.'
    required: true
  github_token:
    description: 'GitHub token for API requests.'
    required: true

runs:
  using: 'composite'
  steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '22'

    - name: Install NPM dependencies
      run: npm install

    - name: Run PR validation
      run: node bin/ci-pr-validation/validate-branch.js
      env:
        GITHUB_TOKEN: ${{ inputs.github_token }}
        PR_NUMBER: ${{ inputs.pr_number }}
        REPO: ${{ inputs.repo }}
        BASE_REF: ${{ inputs.base_ref }}
